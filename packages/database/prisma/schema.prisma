generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Household {
  id      String     @id @default(uuid())
  name    String
  recipes Recipe[]
  plans   MealPlan[]
}

model Recipe {
  id           String         @id @default(uuid())
  householdId  String
  household    Household      @relation(fields: [householdId], references: [id], onDelete: Cascade)
  title        String
  diet         String // "MEAT" | "FISH" | "VEG" (valider i appen)
  active       Boolean        @default(true)
  createdAt    DateTime       @default(now())
  MealPlanItem MealPlanItem[]
}

model MealPlan {
  id          String         @id @default(uuid())
  householdId String
  household   Household      @relation(fields: [householdId], references: [id], onDelete: Cascade)
  weekStart   DateTime
  items       MealPlanItem[]
}

model MealPlanItem {
  id       String   @id @default(uuid())
  planId   String
  plan     MealPlan @relation(fields: [planId], references: [id], onDelete: Cascade)
  day      String // "MON" | "TUE" | ... | "SUN" (valider i appen)
  recipeId String?
  recipe   Recipe?  @relation(fields: [recipeId], references: [id], onDelete: SetNull)
}
